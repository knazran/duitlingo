<div id='dl-mlt-widget' hidden class="duitlingo-widget-body rounded-lg">
    <!-- <svg class="svg-icon" viewBox="0 0 20 20">
        <path d="M13.962,8.885l-3.736,3.739c-0.086,0.086-0.201,0.13-0.314,0.13S9.686,12.71,9.6,12.624l-3.562-3.56C5.863,8.892,5.863,8.611,6.036,8.438c0.175-0.173,0.454-0.173,0.626,0l3.25,3.247l3.426-3.424c0.173-0.172,0.451-0.172,0.624,0C14.137,8.434,14.137,8.712,13.962,8.885 M18.406,10c0,4.644-3.763,8.406-8.406,8.406S1.594,14.644,1.594,10S5.356,1.594,10,1.594S18.406,5.356,18.406,10 M17.521,10c0-4.148-3.373-7.521-7.521-7.521c-4.148,0-7.521,3.374-7.521,7.521c0,4.147,3.374,7.521,7.521,7.521C14.148,17.521,17.521,14.147,17.521,10"></path>
    </svg> -->
    <div id='mlt-1' class='flex flex-col justify-between h-full'>
        <div>
            <p class='text-xl font-bold mb-4'> Your Stock is in the red! </p>
            <p class='text-md text-gray-800 mb-2'> 
                Oh no, the value of a stock in your portfolio has declined by 15%!
            </p>
            <p class='text-md text-gray-800 mb-12'> 
                But donâ€™t panic or make any decision that is driven by your emotions.
            </p>
            <p class='text-md text-black font-bold mb-2'> 
                How should you handle this situation?
            </p>
            <p class='text-md text-gray-800 mb-2'> 
                First, letâ€™s find out what is causing such movement.
            </p>
        </div>
        <div class="mb-2">
            <button id='goto-mlt-2' class='w-full py-2 rounded-full bg-green-500 text-center text-white'> Save My Money Please ðŸ˜¢ðŸ˜¢ðŸ˜¢ </button>
        </div>
    </div>
    
</div>

<script>
    // $("#goto-mlt-2" ).click(function() {
    //     window.location.href = "https://www.bursamarketplace.com/mlt/myportfolio";
    // });

    const targetNode = document.getElementById('myp_portfolio_loader');
    console.log(targetNode)
    // Options for the observer (which mutations to observe)
    const config = { childList: true};

    // Callback function to execute when mutations are observed
    const callback = function(mutationsList, observer) {
        // Use traditional 'for loops' for IE 11
        for(const mutation of mutationsList) {
            $(mutation.target.innerHTML).each(function(idx, tr){
                if (idx === 0){
                    let tr = $("#myp_portfolio_loader" ).find('tr').eq(0)
                    $(tr).find('td').eq(2).text('RM8,520')
                    $(tr).find('td').eq(3).text('RM4.50')

                    let units_elem = '<span>30</span><div><small>3000 units</small></div>'
                    $(tr).find('td').eq(4).html(units_elem)

                    let lost_elem = '<span class="text-red-500 shadow-lg">RM1,278<br>-15.1%</span>'
                    $(tr).find('td').eq(5).html(lost_elem)

                    let value_elem = '<span class="text-red-500 shadow-lg">RM7,242.00</span>'
                    
                    $(tr).find('td').eq(6).html(value_elem)
                
                }
                showWidget();
            })

        }
    };

    // Create an observer instance linked to the callback function
    var observer = new MutationObserver(callback);

    // Start observing the target node for configured mutations
    observer.observe(targetNode, config);

    // // Later, you can stop observing
    // observer.disconnect();
    
    function showWidget() {
        // setTimeout(function(){
            $("#dl-mlt-widget").attr("hidden",false);
            observer.disconnect();
        // }, 3000)
    }
    
    $( "#goto-mlt-2" ).click(function() {
        $("#dl-mlt-widget").attr("hidden",true);

        let tr = $("#myp_portfolio_loader" ).find('tr').eq(0)
        $(tr).find('td').eq(1).addClass('relative')
        $(tr).find('td').eq(1).append("<div class='duitlingo-widget-body-small p-2 text-md'> First, let's see what is going on with this stock. Click on the glowing icon above </div>")
        // $("div:contains(MTAG GROUP BHD)").addClass('relative')
        // $("div:contains(MTAG GROUP BHD)").append("<div class='absolute'> TESTING </div>")
        $('a[href$="https://www.bursamarketplace.com/mkt/themarket/stock/MTAG"]').addClass("bg-blue-300 animate-pulse rounded-full")
        // $("a.nav_learn").addClass("bg-blue-200 animate-pulse")
        
    });
    
    $(document).ready(function(){
        
    })

    
</script>
